<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Metas</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <header class="flex justify-between items-center p-4 bg-white shadow" id="header">
    <h1 class="text-xl font-bold">Sistema de Metas</h1>
    <div class="flex items-center space-x-2">
      <select id="branchSelect" class="border rounded p-1"></select>
      <button id="loginBtn" class="px-3 py-1 bg-indigo-600 text-white rounded">Entrar</button>
      <button id="logoutBtn" class="hidden px-3 py-1 bg-red-600 text-white rounded">Sair</button>
    </div>
  </header>

  <main class="p-4" id="app">
    <!-- Abas -->
    <nav class="mb-4">
      <button data-tab="calendar" class="tab-btn px-3 py-2 bg-indigo-600 text-white rounded">Calendário</button>
      <button data-tab="metas" class="tab-btn px-3 py-2 bg-gray-200 rounded">Metas</button>
      <button data-tab="vendas" class="tab-btn px-3 py-2 bg-gray-200 rounded">Vendas</button>
      <button data-tab="colab" class="tab-btn px-3 py-2 bg-gray-200 rounded">Colaboradores</button>
      <button data-tab="import" class="tab-btn px-3 py-2 bg-gray-200 rounded">Importar</button>
    </nav>

    <!-- Aba Calendário (principal) -->
    <section id="calendarTab" class="tab-content block">
      <!-- Dashboard no topo -->
      <div id="dashboard"></div>
      <!-- Calendário -->
      <div id="calendar" class="bg-white shadow rounded p-4"></div>
    </section>

    <!-- Aba Metas -->
    <section id="metasTab" class="tab-content hidden">
      <button id="novaMetaBtn" class="mb-2 px-3 py-1 bg-indigo-600 text-white rounded">Nova Meta</button>
      <div id="metasList" class="bg-white shadow rounded p-4"></div>
    </section>

    <!-- Aba Vendas -->
    <section id="vendasTab" class="tab-content hidden">
      <button id="novaVendaBtn" class="mb-2 px-3 py-1 bg-indigo-600 text-white rounded">Nova Venda</button>
      <div id="vendasList" class="bg-white shadow rounded p-4"></div>
    </section>

    <!-- Aba Colaboradores -->
    <section id="colabTab" class="tab-content hidden">
      <button id="novoColabBtn" class="mb-2 px-3 py-1 bg-indigo-600 text-white rounded">Novo Colaborador</button>
      <div id="colabList" class="bg-white shadow rounded p-4"></div>
    </section>

    <!-- Aba Importar -->
    <section id="importTab" class="tab-content hidden">
      <input type="file" id="importFile" class="mb-2">
      <button id="importBtn" class="px-3 py-1 bg-indigo-600 text-white rounded">Importar</button>
    </section>
  </main>

  <!-- Modal Meta -->
  <div id="modalMeta" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded p-4 w-96">
      <h2 class="text-lg font-bold mb-2">Cadastrar Meta</h2>
      <form id="formMeta" class="space-y-2">
        <input id="metaTitulo" placeholder="Título" class="w-full border rounded p-2">
        <select id="metaNivel" class="w-full border rounded p-2">
          <option value="1">Meta 1</option>
          <option value="2">Meta 2</option>
          <option value="3">Meta 3</option>
        </select>
        <input id="metaInicio" type="date" class="w-full border rounded p-2">
        <input id="metaFim" type="date" class="w-full border rounded p-2">
        <input id="metaValor" type="number" placeholder="Valor (R$)" class="w-full border rounded p-2">
        <div class="flex justify-end space-x-2">
          <button type="button" id="closeMeta" class="px-3 py-1 bg-gray-300 rounded">Cancelar</button>
          <button type="submit" class="px-3 py-1 bg-indigo-600 text-white rounded">Salvar</button>
        </div>
        <p id="metaMsg" class="text-sm text-green-600"></p>
      </form>
    </div>
  </div>

  <!-- Modal Colaborador -->
  <div id="modalColab" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded p-4 w-96">
      <h2 class="text-lg font-bold mb-2">Cadastrar Colaborador</h2>
      <form id="formColab" class="space-y-2">
        <input id="colabNome" placeholder="Nome" class="w-full border rounded p-2">
        <input id="colabEmail" type="email" placeholder="E-mail" class="w-full border rounded p-2">
        <select id="colabCargo" class="w-full border rounded p-2">
          <option value="vendedor">Vendedor</option>
          <option value="admin">Administrador</option>
        </select>
        <div class="flex justify-end space-x-2">
          <button type="button" id="closeColab" class="px-3 py-1 bg-gray-300 rounded">Cancelar</button>
          <button type="submit" class="px-3 py-1 bg-indigo-600 text-white rounded">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Filial -->
  <div id="modalFilial" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded p-4 w-96">
      <h2 class="text-lg font-bold mb-2">Gerenciar Filial</h2>
      <form id="formFilial" class="space-y-2">
        <input id="filialNome" placeholder="Nome da Filial" class="w-full border rounded p-2">
        <input id="filialCodigo" placeholder="Código" class="w-full border rounded p-2">
        <input id="filialCor" type="color" value="#000000" class="w-full border rounded p-2">
        <label class="flex items-center space-x-2">
          <input id="filialAtiva" type="checkbox">
          <span>Ativa</span>
        </label>
        <div id="filialList" class="max-h-40 overflow-y-auto border p-2 rounded"></div>
        <div class="flex justify-end space-x-2">
          <button type="button" id="closeFilial" class="px-3 py-1 bg-gray-300 rounded">Cancelar</button>
          <button type="submit" class="px-3 py-1 bg-indigo-600 text-white rounded">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Login -->
  <div id="modalLogin" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white rounded p-4 w-80">
      <h2 class="text-lg font-bold mb-2">Entrar</h2>
      <form id="formLogin" class="space-y-2">
        <input id="loginEmail" type="email" placeholder="E-mail" class="w-full border rounded p-2">
        <input id="loginPass" type="password" placeholder="Senha" class="w-full border rounded p-2">
        <div class="flex justify-end space-x-2">
          <button type="button" id="closeLogin" class="px-3 py-1 bg-gray-300 rounded">Cancelar</button>
          <button type="submit" class="px-3 py-1 bg-indigo-600 text-white rounded">Entrar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="firebase.js"></script>
  <script src="app.js"></script>
</body>
</html>
