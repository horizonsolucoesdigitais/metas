<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Metas — Horizon</title>
  <!-- Tailwind via CDN (modo Play) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Config básica de tema
    tailwind.config = {
      theme: {
        extend: {
          boxShadow: {
            suave: "0 10px 25px -10px rgba(0,0,0,0.25)",
          },
          borderRadius: {
            xl2: "1rem",
          },
        },
      },
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    html, body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji'; }
    /* Scrollbar sutil */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 999px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- Container global -->
  <div id="app-root" class="min-h-screen">

    <!-- Barra superior -->
    <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-2xl bg-slate-900 text-white grid place-items-center shadow-suave">H</div>
          <div>
            <h1 class="text-lg font-semibold leading-5">Sistema de Metas</h1>
            <p class="text-xs text-slate-500 -mt-0.5">Horizon Soluções Digitais</p>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <!-- Seletor de filial -->
          <label class="sr-only" for="branch-select">Filial</label>
          <select id="branch-select" class="px-3 py-2 rounded-xl border border-slate-300 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-slate-900/10">
            <option value="default">Todas as Filiais</option>
          </select>

          <!-- Usuário -->
          <div id="user-area" class="hidden items-center gap-2">
            <span id="user-email" class="text-sm text-slate-600"></span>
            <button id="btn-logout" class="px-3 py-2 text-sm rounded-xl border border-slate-300 hover:bg-slate-100">Sair</button>
          </div>
          
          <!-- Botão login aparece quando deslogado -->
          <button id="btn-open-login" class="px-3 py-2 text-sm rounded-xl border border-slate-300 hover:bg-slate-100">Entrar</button>
        </div>
      </div>
    </header>

    <!-- Wrapper conteúdo -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

      <!-- Abas -->
      <nav class="mb-4">
        <ul class="flex flex-wrap gap-2" id="tabs">
          <li><button data-tab="tab-metas" class="tab-btn px-4 py-2 rounded-xl text-sm bg-white border border-slate-200 shadow-suave">Metas</button></li>
          <li><button data-tab="tab-acoes" class="tab-btn px-4 py-2 rounded-xl text-sm bg-white border border-slate-200">Ações</button></li>
          <li><button data-tab="tab-vendas" class="tab-btn px-4 py-2 rounded-xl text-sm bg-white border border-slate-200">Vendas</button></li>
          <li><button data-tab="tab-importar" class="tab-btn px-4 py-2 rounded-xl text-sm bg-white border border-slate-200">Importar CSV/XLS</button></li>
          <li><button data-tab="tab-calendario" class="tab-btn px-4 py-2 rounded-xl text-sm bg-white border border-slate-200">Calendário</button></li>
          <li class="ml-auto"><button id="btn-abrir-colab" class="px-4 py-2 rounded-xl text-sm bg-slate-900 text-white shadow-suave">Colaboradores</button></li>
        </ul>
      </nav>

      <!-- Conteúdo das abas -->
      <section id="tab-metas" class="tab-pane hidden">
        <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-suave">
          <div class="flex items-center justify-between mb-3">
            <h2 class="font-semibold">Metas por Nível</h2>
            <button id="btn-nova-meta" class="px-3 py-2 rounded-xl text-sm bg-slate-900 text-white">Nova Meta</button>
          </div>
          <div id="lista-metas" class="grid gap-3"></div>
        </div>
      </section>

      <section id="tab-acoes" class="tab-pane hidden">
        <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-suave">
          <h2 class="font-semibold mb-3">Ações</h2>
          <div id="lista-acoes" class="grid gap-3"></div>
        </div>
      </section>

      <section id="tab-vendas" class="tab-pane hidden">
        <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-suave">
          <div class="flex items-center justify-between mb-3">
            <h2 class="font-semibold">Vendas</h2>
            <button id="btn-nova-venda" class="px-3 py-2 rounded-xl text-sm bg-slate-900 text-white">Registrar Venda</button>
          </div>
          <div id="lista-vendas" class="grid gap-3"></div>
        </div>
      </section>

      <section id="tab-importar" class="tab-pane hidden">
        <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-suave">
          <h2 class="font-semibold mb-3">Importar CSV/XLS</h2>
          <form id="form-import" class="flex flex-col gap-3">
            <input id="file-import" type="file" accept=".csv, .xlsx, .xls" class="block w-full text-sm" />
            <button id="btn-import" type="button" class="px-3 py-2 rounded-xl text-sm bg-slate-900 text-white w-fit">Importar</button>
            <p id="import-status" class="text-sm text-slate-600"></p>
          </form>
        </div>
      </section>

      <section id="tab-calendario" class="tab-pane hidden">
        <div class="bg-white border border-slate-200 rounded-2xl p-4 shadow-suave">
          <div class="flex flex-wrap items-center justify-between gap-3 mb-3">
            <h2 class="font-semibold">Calendário de Metas</h2>
            <div class="flex items-center gap-2">
              <button id="prev-month" class="px-3 py-2 rounded-xl border border-slate-300">◀</button>
              <div id="current-month" class="min-w-[180px] text-center font-medium"></div>
              <button id="next-month" class="px-3 py-2 rounded-xl border border-slate-300">▶</button>
            </div>
          </div>

          <div class="grid grid-cols-7 gap-2 text-center text-xs font-medium text-slate-500 mb-1">
            <div>Dom</div>
            <div>Seg</div>
            <div>Ter</div>
            <div>Qua</div>
            <div>Qui</div>
            <div>Sex</div>
            <div>Sab</div>
          </div>
          <div id="calendar-grid" class="grid grid-cols-7 gap-2"></div>
        </div>
      </section>

    </main>
  </div>

  <!-- Modal Login -->
  <div id="modal-login" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl p-6 w-full max-w-md border border-slate-200 shadow-suave">
      <div class="flex items-start justify-between mb-4">
        <div>
          <h3 class="text-lg font-semibold">Entrar</h3>
          <p class="text-sm text-slate-600">Acesse com e-mail e senha</p>
        </div>
        <button id="close-login" class="text-slate-500">✕</button>
      </div>
      <form id="login-form" class="grid gap-3">
        <label class="grid gap-1">
          <span class="text-sm">E-mail</span>
          <input id="login-email" type="email" required class="px-3 py-2 rounded-xl border border-slate-300" />
        </label>
        <label class="grid gap-1">
          <span class="text-sm">Senha</span>
          <input id="login-password" type="password" required class="px-3 py-2 rounded-xl border border-slate-300" />
        </label>
        <div class="flex items-center gap-2 text-sm">
          <input id="login-remember" type="checkbox" class="rounded" />
          <label for="login-remember">Manter conectado</label>
        </div>
        <button id="btn-login" type="submit" class="mt-1 px-4 py-2 rounded-xl bg-slate-900 text-white">Entrar</button>
        <p id="login-msg" class="text-sm text-slate-600"></p>
      </form>
    </div>
  </div>

  <!-- Modal Nova Meta -->
  <div id="modal-meta" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl p-6 w-full max-w-md border border-slate-200 shadow-suave">
      <div class="flex items-start justify-between mb-4">
        <div>
          <h3 class="text-lg font-semibold">Nova Meta</h3>
          <p class="text-sm text-slate-600">Cadastre uma meta com nível e período</p>
        </div>
        <button id="close-meta" class="text-slate-500">✕</button>
      </div>
      <form id="form-meta" class="grid gap-3">
        <label class="grid gap-1">
          <span class="text-sm">Título</span>
          <input id="meta-titulo" type="text" required class="px-3 py-2 rounded-xl border border-slate-300" />
        </label>
        <label class="grid gap-1">
          <span class="text-sm">Nível</span>
          <select id="meta-nivel" class="px-3 py-2 rounded-xl border border-slate-300">
            <option value="1">Meta 1</option>
            <option value="2">Meta 2</option>
            <option value="3">Meta 3</option>
          </select>
        </label>
        <div class="grid grid-cols-2 gap-3">
          <label class="grid gap-1">
            <span class="text-sm">Início</span>
            <input id="meta-inicio" type="date" class="px-3 py-2 rounded-xl border border-slate-300" />
          </label>
          <label class="grid gap-1">
            <span class="text-sm">Término</span>
            <input id="meta-fim" type="date" class="px-3 py-2 rounded-xl border border-slate-300" />
          </label>
        </div>
        <label class="grid gap-1">
          <span class="text-sm">Valor (R$)</span>
          <input id="meta-valor" type="number" step="0.01" min="0" class="px-3 py-2 rounded-xl border border-slate-300" />
        </label>
        <button id="btn-salvar-meta" type="submit" class="mt-1 px-4 py-2 rounded-xl bg-slate-900 text-white">Salvar</button>
        <p id="meta-msg" class="text-sm text-slate-600"></p>
      </form>
    </div>
  </div>

  <!-- Modal Colaboradores (CRUD simples) -->
  <div id="modal-colab" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4">
    <div class="bg-white rounded-2xl p-6 w-full max-w-2xl border border-slate-200 shadow-suave">
      <div class="flex items-start justify-between mb-4">
        <div>
          <h3 class="text-lg font-semibold">Colaboradores</h3>
          <p class="text-sm text-slate-600">Gerencie usuários e permissões</p>
        </div>
        <button id="close-colab" class="text-slate-500">✕</button>
      </div>
      <div class="grid gap-4">
        <form id="form-colab" class="grid lg:grid-cols-4 sm:grid-cols-2 grid-cols-1 gap-3 items-end">
          <label class="grid gap-1">
            <span class="text-sm">Nome</span>
            <input id="colab-nome" type="text" class="px-3 py-2 rounded-xl border border-slate-300" />
          </label>
          <label class="grid gap-1">
            <span class="text-sm">E-mail</span>
            <input id="colab-email" type="email" class="px-3 py-2 rounded-xl border border-slate-300" />
          </label>
          <label class="grid gap-1">
            <span class="text-sm">Cargo</span>
            <select id="colab-cargo" class="px-3 py-2 rounded-xl border border-slate-300">
              <option value="vendedor">Vendedor</option>
              <option value="gerente">Gerente</option>
              <option value="admin">Admin</option>
            </select>
          </label>
          <button id="btn-add-colab" type="button" class="px-4 py-2 rounded-xl bg-slate-900 text-white">Adicionar</button>
        </form>
        <div id="lista-colab" class="grid gap-2"></div>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <!-- Seu config Firebase (arquivo dedicado) -->
  <script src="./firebase.js"></script>
  
  <!-- App principal -->
  <script src="./app.js"></script>
</body>
</html>
